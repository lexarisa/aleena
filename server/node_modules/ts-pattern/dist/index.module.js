var n=Symbol("@ts-pattern/matcher"),t="@ts-pattern/anonymous-select-key",e=function(n){return Boolean(n&&"object"==typeof n)},r=function(t){return t&&!!t[n]},u=function t(u,o,i){if(e(u)){if(r(u)){var c=u[n]().match(o),a=c.matched,f=c.selections;return a&&f&&Object.keys(f).forEach(function(n){return i(n,f[n])}),a}if(!e(o))return!1;if(Array.isArray(u))return!!Array.isArray(o)&&u.length===o.length&&u.every(function(n,e){return t(n,o[e],i)});if(u instanceof Map)return o instanceof Map&&Array.from(u.keys()).every(function(n){return t(u.get(n),o.get(n),i)});if(u instanceof Set){if(!(o instanceof Set))return!1;if(0===u.size)return 0===o.size;if(1===u.size){var s=Array.from(u.values())[0];return r(s)?Array.from(o.values()).every(function(n){return t(s,n,i)}):o.has(s)}return Array.from(u.values()).every(function(n){return o.has(n)})}return Object.keys(u).every(function(e){var c,a=u[e];return(e in o||r(c=a)&&"optional"===c[n]().matcherType)&&t(a,o[e],i)})}return Object.is(o,u)},o=function t(u){var o,c,a;return e(u)?r(u)?null!=(o=null==(c=(a=u[n]()).getSelectionKeys)?void 0:c.call(a))?o:[]:Array.isArray(u)?i(u,t):i(Object.values(u),t):[]},i=function(n,t){return n.reduce(function(n,e){return n.concat(t(e))},[])};function c(t){var e;return(e={})[n]=function(){return{match:function(n){var e={},r=function(n,t){e[n]=t};return void 0===n?(o(t).forEach(function(n){return r(n,void 0)}),{matched:!0,selections:e}):{matched:u(t,n,r),selections:e}},getSelectionKeys:function(){return o(t)},matcherType:"optional"}},e}function a(t){var e;return(e={})[n]=function(){return{match:function(n){if(!Array.isArray(n))return{matched:!1};var e={},r=function(n,t){e[n]=(e[n]||[]).concat([t])};return{matched:n.every(function(n){return u(t,n,r)}),selections:e}},getSelectionKeys:function(){return o(t)}}},e}function f(){var t,e=[].slice.call(arguments);return(t={})[n]=function(){return{match:function(n){var t={},r=function(n,e){t[n]=e};return{matched:e.every(function(t){return u(t,n,r)}),selections:t}},getSelectionKeys:function(){return i(e,o)},matcherType:"and"}},t}function s(){var t,e=[].slice.call(arguments);return(t={})[n]=function(){return{match:function(n){var t={},r=function(n,e){t[n]=e};return i(e,o).forEach(function(n){return r(n,void 0)}),{matched:e.some(function(t){return u(t,n,r)}),selections:t}},getSelectionKeys:function(){return i(e,o)},matcherType:"or"}},t}function l(t){var e;return(e={})[n]=function(){return{match:function(n){return{matched:!u(t,n,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},e}function h(t){var e;return(e={})[n]=function(){return{match:function(n){return{matched:Boolean(t(n))}}}},e}function v(){var e,r=[].slice.call(arguments),i="string"==typeof r[0]?r[0]:void 0,c=2===r.length?r[1]:"string"==typeof r[0]?void 0:r[0];return(e={})[n]=function(){return{match:function(n){var e,r=((e={})[null!=i?i:t]=n,e);return{matched:void 0===c||u(c,n,function(n,t){r[n]=t}),selections:r}},getSelectionKeys:function(){return[null!=i?i:t].concat(void 0===c?[]:o(c))}}},e}var y=h(function(n){return!0}),m=y,d=h(function(n){return"string"==typeof n}),p=h(function(n){return"number"==typeof n}),g=h(function(n){return"boolean"==typeof n}),b=h(function(n){return"bigint"==typeof n}),A=h(function(n){return"symbol"==typeof n}),w=h(function(n){return null==n}),S={__proto__:null,optional:c,array:a,intersection:f,union:s,not:l,when:h,select:v,any:y,_:m,string:d,number:p,boolean:g,bigint:b,symbol:A,nullish:w,instanceOf:function(n){return h(function(n){return function(t){return t instanceof n}}(n))},typed:function(){return{array:a,optional:c,intersection:f,union:s,not:l,select:v,when:h}}};function j(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var O=function(n){return new K(n,[])},K=/*#__PURE__*/function(){function n(n,t){this.value=void 0,this.cases=void 0,this.value=n,this.cases=t}var e=n.prototype;return e.with=function(){var e=[].slice.call(arguments),r=e[e.length-1],o=[e[0]],i=[];return 3===e.length&&"function"==typeof e[1]?(o.push(e[0]),i.push(e[1])):e.length>2&&o.push.apply(o,e.slice(1,e.length-1)),new n(this.value,this.cases.concat([{match:function(n){var e={},r=Boolean(o.some(function(t){return u(t,n,function(n,t){e[n]=t})})&&i.every(function(t){return t(n)}));return{matched:r,value:r&&Object.keys(e).length?t in e?e[t]:e:n}},handler:r}]))},e.when=function(t,e){return new n(this.value,this.cases.concat([{match:function(n){return{matched:Boolean(t(n)),value:n}},handler:e}]))},e.otherwise=function(t){return new n(this.value,this.cases.concat([{match:function(n){return{matched:!0,value:n}},handler:t}])).run()},e.exhaustive=function(){return this.run()},e.run=function(){for(var n,t=this.value,e=void 0,r=function(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return j(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(n,t):void 0}}(n))){e&&(n=e);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.cases);!(n=r()).done;){var u=n.value,o=u.match(this.value);if(o.matched){t=o.value,e=u.handler;break}}if(!e){var i;try{i=JSON.stringify(this.value)}catch(n){i=this.value}throw new Error("Pattern matching error: no pattern matches value "+i)}return e(t,this.value)},n}();function k(){var n=[].slice.call(arguments);if(1===n.length){var t=n[0];return function(n){return u(t,n,function(){})}}if(2===n.length){var e=n,r=e[0],o=e[1];return u(r,o,function(){})}throw new Error("isMatching wasn't given the right number of arguments: expected 1 or 2, received "+n.length+".")}export{S as P,S as Pattern,k as isMatching,O as match};
//# sourceMappingURL=index.module.js.map
