var n=Symbol("@ts-pattern/matcher"),t="@ts-pattern/anonymous-select-key",e=function(n){return Boolean(n&&"object"==typeof n)},r=function(t){return t&&!!t[n]},o=function t(o,u,i){if(e(o)){if(r(o)){var c=o[n]().match(u),a=c.matched,f=c.selections;return a&&f&&Object.keys(f).forEach(function(n){return i(n,f[n])}),a}if(!e(u))return!1;if(Array.isArray(o))return!!Array.isArray(u)&&o.length===u.length&&o.every(function(n,e){return t(n,u[e],i)});if(o instanceof Map)return u instanceof Map&&Array.from(o.keys()).every(function(n){return t(o.get(n),u.get(n),i)});if(o instanceof Set){if(!(u instanceof Set))return!1;if(0===o.size)return 0===u.size;if(1===o.size){var s=Array.from(o.values())[0];return r(s)?Array.from(u.values()).every(function(n){return t(s,n,i)}):u.has(s)}return Array.from(o.values()).every(function(n){return u.has(n)})}return Object.keys(o).every(function(e){var c,a=o[e];return(e in u||r(c=a)&&"optional"===c[n]().matcherType)&&t(a,u[e],i)})}return Object.is(u,o)},u=function t(o){var u,c,a;return e(o)?r(o)?null!=(u=null==(c=(a=o[n]()).getSelectionKeys)?void 0:c.call(a))?u:[]:Array.isArray(o)?i(o,t):i(Object.values(o),t):[]},i=function(n,t){return n.reduce(function(n,e){return n.concat(t(e))},[])};function c(t){var e;return(e={})[n]=function(){return{match:function(n){var e={},r=function(n,t){e[n]=t};return void 0===n?(u(t).forEach(function(n){return r(n,void 0)}),{matched:!0,selections:e}):{matched:o(t,n,r),selections:e}},getSelectionKeys:function(){return u(t)},matcherType:"optional"}},e}function a(t){var e;return(e={})[n]=function(){return{match:function(n){if(!Array.isArray(n))return{matched:!1};var e={},r=function(n,t){e[n]=(e[n]||[]).concat([t])};return{matched:n.every(function(n){return o(t,n,r)}),selections:e}},getSelectionKeys:function(){return u(t)}}},e}function f(){var t,e=[].slice.call(arguments);return(t={})[n]=function(){return{match:function(n){var t={},r=function(n,e){t[n]=e};return{matched:e.every(function(t){return o(t,n,r)}),selections:t}},getSelectionKeys:function(){return i(e,u)},matcherType:"and"}},t}function s(){var t,e=[].slice.call(arguments);return(t={})[n]=function(){return{match:function(n){var t={},r=function(n,e){t[n]=e};return i(e,u).forEach(function(n){return r(n,void 0)}),{matched:e.some(function(t){return o(t,n,r)}),selections:t}},getSelectionKeys:function(){return i(e,u)},matcherType:"or"}},t}function l(t){var e;return(e={})[n]=function(){return{match:function(n){return{matched:!o(t,n,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},e}function h(t){var e;return(e={})[n]=function(){return{match:function(n){return{matched:Boolean(t(n))}}}},e}function v(){var e,r=[].slice.call(arguments),i="string"==typeof r[0]?r[0]:void 0,c=2===r.length?r[1]:"string"==typeof r[0]?void 0:r[0];return(e={})[n]=function(){return{match:function(n){var e,r=((e={})[null!=i?i:t]=n,e);return{matched:void 0===c||o(c,n,function(n,t){r[n]=t}),selections:r}},getSelectionKeys:function(){return[null!=i?i:t].concat(void 0===c?[]:u(c))}}},e}var y=h(function(n){return!0}),m=y,d=h(function(n){return"string"==typeof n}),p=h(function(n){return"number"==typeof n}),g=h(function(n){return"boolean"==typeof n}),b=h(function(n){return"bigint"==typeof n}),A=h(function(n){return"symbol"==typeof n}),w=h(function(n){return null==n}),S={__proto__:null,optional:c,array:a,intersection:f,union:s,not:l,when:h,select:v,any:y,_:m,string:d,number:p,boolean:g,bigint:b,symbol:A,nullish:w,instanceOf:function(n){return h(function(n){return function(t){return t instanceof n}}(n))},typed:function(){return{array:a,optional:c,intersection:f,union:s,not:l,select:v,when:h}}};function j(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var O=/*#__PURE__*/function(){function n(n,t){this.value=void 0,this.cases=void 0,this.value=n,this.cases=t}var e=n.prototype;return e.with=function(){var e=[].slice.call(arguments),r=e[e.length-1],u=[e[0]],i=[];return 3===e.length&&"function"==typeof e[1]?(u.push(e[0]),i.push(e[1])):e.length>2&&u.push.apply(u,e.slice(1,e.length-1)),new n(this.value,this.cases.concat([{match:function(n){var e={},r=Boolean(u.some(function(t){return o(t,n,function(n,t){e[n]=t})})&&i.every(function(t){return t(n)}));return{matched:r,value:r&&Object.keys(e).length?t in e?e[t]:e:n}},handler:r}]))},e.when=function(t,e){return new n(this.value,this.cases.concat([{match:function(n){return{matched:Boolean(t(n)),value:n}},handler:e}]))},e.otherwise=function(t){return new n(this.value,this.cases.concat([{match:function(n){return{matched:!0,value:n}},handler:t}])).run()},e.exhaustive=function(){return this.run()},e.run=function(){for(var n,t=this.value,e=void 0,r=function(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return j(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(n,t):void 0}}(n))){e&&(n=e);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.cases);!(n=r()).done;){var o=n.value,u=o.match(this.value);if(u.matched){t=u.value,e=o.handler;break}}if(!e){var i;try{i=JSON.stringify(this.value)}catch(n){i=this.value}throw new Error("Pattern matching error: no pattern matches value "+i)}return e(t,this.value)},n}();exports.P=S,exports.Pattern=S,exports.isMatching=function(){var n=[].slice.call(arguments);if(1===n.length){var t=n[0];return function(n){return o(t,n,function(){})}}if(2===n.length){var e=n,r=e[0],u=e[1];return o(r,u,function(){})}throw new Error("isMatching wasn't given the right number of arguments: expected 1 or 2, received "+n.length+".")},exports.match=function(n){return new O(n,[])};
//# sourceMappingURL=index.cjs.map
